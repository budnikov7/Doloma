
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	ИспользоватьФильтры = Истина; 
	КодФормы = "Справочник_Номенклатура_ФормаСписка";
	ПодборТоваровСервер.ПриСозданииНаСервере(ЭтаФорма);
	
КонецПроцедуры   

&НаКлиенте
Процедура ВидыНоменклатурыПриАктивизацииСтроки(Элемент)   
	
	ПодборТоваровКлиент.ПриАктивизацииСтрокиСпискаВидыНоменклатуры(ЭтаФорма); 
	
КонецПроцедуры

&НаКлиенте
Процедура ВидыНоменклатурыПриАктивизацииСтрокиОбработчикОжидания()
	
	ТекущиеДанные = Элементы.ВидыНоменклатуры.ТекущиеДанные;
	
	Если ТекущиеДанные <> Неопределено Тогда
		ВидНоменклатурыПриИзмененииНаСервере();
	КонецЕсли;
	
КонецПроцедуры   

&НаСервере
Процедура ВидНоменклатурыПриИзмененииНаСервере()
	
	ПодборТоваровСервер.ПриИзмененииВидаНоменклатуры(ЭтаФорма);
	
КонецПроцедуры

&НаКлиенте
Процедура СписокНоменклатураПередНачаломДобавления(Элемент, Отказ, Копирование, Родитель, Группа, Параметр)
	
	Если Не Копирование И Не Группа Тогда
		
		Отказ = Истина;
		
		ПараметрыСозданияВФорму = Новый Структура("ВидНоменклатуры");
		
		Если ИспользоватьФильтры Тогда
			
			Если ЗначениеЗаполнено(ВидНоменклатуры) Тогда
				ПараметрыСозданияВФорму.ВидНоменклатуры = ВидНоменклатуры;
			КонецЕсли;
			
		КонецЕсли;
		
		ОткрытьФорму("Справочник.Номенклатура.ФормаОбъекта", Новый Структура("ДополнительныеПараметры", ПараметрыСозданияВФорму), ЭтаФорма); 
		
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура ПриЗакрытии(ЗавершениеРаботы) 
	
	Если Не ЗавершениеРаботы Тогда
		СохранитьНастройкиФормыНаСервере();
	КонецЕсли;
	
КонецПроцедуры 

&НаСервере
Процедура СохранитьНастройкиФормыНаСервере()
	
	ПодборТоваровСервер.СохранитьНастройкиФормы(ЭтаФорма);
	
КонецПроцедуры   

&НаКлиенте
Процедура ИспользоватьФильтрыПриИзменении(Элемент)
	
	ИспользоватьФильтрыПриИзмененииНаСервере();
	
КонецПроцедуры

&НаСервере
Процедура ИспользоватьФильтрыПриИзмененииНаСервере()
	
	ПодборТоваровСервер.ПриИзмененииИспользованияФильтров(ЭтаФорма);
	
КонецПроцедуры

&НаКлиенте
Процедура СписокНоменклатураПриАктивизацииСтроки(Элемент)   
	
	ПодборТоваровКлиент.ПриАктивизацииСтрокиСпискаНоменклатуры(ЭтаФорма);
	ТекущиеДанные = Элементы.СписокНоменклатура.ТекущиеДанные;
	Если ТекущиеДанные <> Неопределено Тогда
		ТипНоменклатуры = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(ТекущиеДанные.Ссылка, "ТипНоменклатуры");
		Элементы.ФормаТаблицаПитательности.Доступность = ТипНоменклатуры = ПредопределенноеЗначение("Перечисление.ТипыНоменклатуры.Корм");
	Иначе
		Элементы.ФормаТаблицаПитательности.Доступность = Ложь;
	КонецЕсли;
	
КонецПроцедуры 

&НаКлиенте
Процедура СписокПриАктивизацииСтрокиОбработчикОжидания()
	
	ПодборТоваровКлиент.УстановитьТекущуюСтрокуИерархииНоменклатуры(ЭтаФорма);
	
КонецПроцедуры

&НаКлиенте
Процедура ТаблицаПитательности(Команда)
	
	ТекущиеДанные = Элементы.СписокНоменклатура.ТекущиеДанные;
	СтрОтбора = Новый Структура("Номенклатура", ТекущиеДанные.Ссылка);
	ПараметрыФормы = Новый Структура("Отбор", СтрОтбора);
	ОткрытьФорму("РегистрСведений.ТаблицаПитательностиКормов.ФормаСписка", ПараметрыФормы, ЭтотОбъект);

КонецПроцедуры


